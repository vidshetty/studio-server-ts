(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/latest-whiteblack.1827c48d.svg"},,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/latest-blackwhite.85de83fd.svg"},function(e,t,a){e.exports=a.p+"static/media/close.57ecc712.svg"},,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/success.388f5d07.svg"},function(e,t,a){e.exports=a.p+"static/media/failure.94447346.svg"},function(e,t,a){e.exports=a(78)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/latest-bluewhite.b3b544c8.svg"},function(e,t,a){e.exports=a.p+"static/media/linkedin-blue.a896527c.svg"},function(e,t,a){e.exports=a.p+"static/media/github-blue.9e082e29.svg"},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),l=a(12),o=a(5),i=a(3),u=a.n(i),m=a(4),d=a(1),p=a(2),f=a(15),v=a.n(f),E=(a(19),function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("http://localhost:5000"){e.next=5;break}return e.next=4,v()({method:"GET",url:"https://fervent-meninsky-931668.netlify.app/.netlify/functions/serverUrls"}).then(function(e){return e.data.server});case 4:e.sent;case 5:return{USER:localStorage.getItem("userId")||""},e.prev=6,e.next=9,v()({method:t.method,url:"api"===t.to?"/api".concat(t.endpoint):"/api/auth".concat(t.endpoint),data:t.data||{}});case 9:return a=e.sent,e.abrupt("return",a.data);case 13:return e.prev=13,e.t0=e.catch(6),console.log("ERROR----",e.t0.message),e.abrupt("return",{});case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),h=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",url:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",url:"/api/auth/server-type"});case 2:if(t=e.sent,"MAIN"!==(a=t.data)){e.next=9;break}return e.next=7,Promise.all([h("https://songserver1.herokuapp.com"),h("https://songserver2.herokuapp.com"),h("https://songserver3.herokuapp.com")]);case 7:e.next=12;break;case 9:if("BACKUP"!==a){e.next=12;break}return e.next=12,Promise.all([h("https://songserver1-backup.herokuapp.com"),h("https://songserver2-backup.herokuapp.com"),h("https://songserver3-backup.herokuapp.com")]);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();var g=function(e){var t=e.err;return r.a.createElement("div",{className:"feedback",style:{color:"red"}},t)},N=(a(61),a(62),a(13)),w=a.n(N),x=a(18),y=a.n(x),k=(a(63),a(64),a(65),function(e){var t=e.picture,a=e.name;return r.a.createElement("div",{className:"topbar"},r.a.createElement("div",{className:"innertopbar"},r.a.createElement("div",{className:"logopart"},r.a.createElement("img",{src:w.a,className:"logo",alt:""}),r.a.createElement("span",null,"Studio")),r.a.createElement("div",{className:"menupart"},r.a.createElement("div",{className:"profilepart"},r.a.createElement("div",{className:"profilepart-inner",title:a},r.a.createElement("img",{src:t,alt:""}))))))}),O=function(e){var t=e.dark;return r.a.createElement("div",{className:t?"login-top dark":"login-top"},r.a.createElement("img",{src:t?w.a:y.a,alt:""}),r.a.createElement("span",null,"Studio"))},j=(a(66),function(){return r.a.createElement("div",{className:"footer-container"},r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"StudioMusic is a music streaming web app solely made as a project showcasing skillsets and for fun"),r.a.createElement("p",null,"StudioMusic does not own or have copyrights of any of the songs on the platform"),r.a.createElement("p",null,"We do not make any money out of this"),r.a.createElement("p",null,"Please do not sue us"),r.a.createElement("p",null,"It is completely safe to log in with your Google account"),r.a.createElement("p",null,"We only store your account name, email id and profile picture")))}),S=function(e){var t=e.found,a=e.user,c=Object(n.useState)(!1),s=Object(d.a)(c,2),l=s[0],o=s[1],i=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return t.preventDefault(),o(!0),e.next=6,E({method:"POST",endpoint:"/sign-out",data:{userId:a._id}});case 6:e.sent&&(window.location.href="/");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"center"},r.a.createElement("p",null,"Music"),r.a.createElement("p",null,"for Everyone."),""===t?r.a.createElement("div",{className:"main-loader"},r.a.createElement("div",{className:"main-loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):null,!1===t?r.a.createElement("button",{onClick:function(e){window.location.href="/login/google"},className:"gotogoogle"},"CONTINUE WITH GOOGLE"):null,!0===t?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(e){window.location.href="/player"},className:"gotogoogle"},"OPEN PLAYER"),r.a.createElement("button",{onClick:i,className:"gotogoogle",style:{marginTop:"20px"}},l?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"SIGN OUT")):null)},T=function(e){var t=e.item;return r.a.createElement("div",{className:"item",onClick:function(){window.location.href="/player/album/".concat(t.Album)},title:t.Album},r.a.createElement("img",{src:t.Thumbnail,alt:""}),r.a.createElement("div",{className:"highlight"},r.a.createElement("div",{className:"albumname"},t.Album),r.a.createElement("div",{style:{width:"100%",height:"20px"}}),r.a.createElement("div",{className:"gotoalbum"},"GO TO ALBUM")))},C=function(e){var t=e.each;return r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement(T,{item:e})}))},I=function(e){var t=e.user.recentlyPlayed||{};return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-inner-container"},r.a.createElement("div",{className:"inner-top"},"Your recent history"),r.a.createElement("div",{className:"inner-display"},Object.keys(t).map(function(e){return r.a.createElement(C,{each:t[e]})}))))},P=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(d.a)(s,2),o=l[0],i=l[1],p=function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"GET",endpoint:"/whosthis?from=auth",to:"api"});case 2:if(!(t=e.sent)||!t.found){e.next=7;break}return c(t.user),i(!0),e.abrupt("return");case 7:i(!1);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){p()},[]),r.a.createElement("div",{className:"main-container"},r.a.createElement(k,{picture:a&&a.googleAccount&&a.googleAccount.picture,name:a&&a.username}),r.a.createElement("div",{className:"mainscreen-container"},r.a.createElement("div",{className:"mainscreen"},r.a.createElement("div",{className:"middle-container"},r.a.createElement(S,{found:o,user:a})))),o&&Object.keys(a.recentlyPlayed).length>0?r.a.createElement(I,{user:a}):null,r.a.createElement(j,null))},G=(a(16),a(72),a(73),a(34),a(35),a(74),a(75),a(76),function(e){return r.a.createElement("button",{className:e.className,onClick:function(t){!function(e){var t=e.currentTarget,a=t.lastChild,n=Math.max(t.clientWidth,t.clientHeight),r=n/2,c=t.getBoundingClientRect();a.style.width=a.style.height="".concat(n,"px"),a.style.left="".concat(e.clientX-(c.left+r),"px"),a.style.top="".concat(e.clientY-(c.top+r),"px"),a.classList.remove("hidden"),a.classList.add("play"),setTimeout(function(){a.classList.remove("play"),a.classList.add("hidden")},600)}(t),e.onClick(t)},title:e.title,style:{outline:"none",position:"relative",overflow:"hidden"}},e.children,r.a.createElement("span",{className:"ripple hidden"}))}),A=function(){var e=Object(o.f)().userId,t=Object(n.useState)(!0),a=Object(d.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),i=Object(d.a)(l,2),f=i[0],v=i[1],h=Object(n.useState)(!1),N=Object(d.a)(h,2),w=N[0],x=N[1],y=Object(n.useState)({}),k=Object(d.a)(y,2),j=k[0],S=k[1],T=Object(n.useState)(""),C=Object(d.a)(T,2),I=C[0],P=C[1],A=Object(n.useState)(""),U=Object(d.a)(A,2),q=U[0],R=U[1],Y=Object(n.useState)({}),L=Object(d.a)(Y,2),M=L[0],_=L[1],W=Object(n.useState)(!1),B=Object(d.a)(W,2),D=B[0],F=B[1],H=Object(n.useState)({button:!1,loading:!1,requestSent:!1}),J=Object(d.a)(H,2),Q=J[0],K=J[1],X=function(){var t=Object(m.a)(u.a.mark(function t(){var a,n,r,c,l,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E({method:"POST",endpoint:"/oauth-check",data:{userId:e}});case 2:if(!(a=t.sent).error){t.next=5;break}return t.abrupt("return",window.location.href="/");case 5:if(n=a.status,r=a.type,c=a.set_username,l=a.only_button,o=a.request_button,200!==n){t.next=8;break}return t.abrupt("return",window.location.href="/player");case 8:s(!1),S(a.user),c?(_({status:n,msg:"Your account has been granted access",period:a.period}),P(a.user.name),F(!0)):l?(_({status:n,msg:"",period:a.period}),F(!1)):"under_review"===r?_({status:n,msg:"Your account is awaiting approval"}):"expired"===r?_({status:n,msg:"Your account access has expired"}):"revoked"===r&&_({status:n,msg:"Your account access has been revoked"}),o&&K(function(e){return Object(p.a)({},e,{button:!0})});case 12:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(m.a)(u.a.mark(function t(a){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!q){t.next=3;break}return t.abrupt("return");case 3:return v(!0),t.next=6,E({method:"POST",endpoint:"/continue-oauth-signin",data:{username:I,userId:e}});case 6:if(!(n=t.sent).error){t.next=9;break}return t.abrupt("return",window.location.href="/");case 9:if(!n.success){t.next=11;break}return t.abrupt("return",window.location.href="/player");case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(m.a)(u.a.mark(function t(a){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),x(!0),t.next=4,E({method:"POST",endpoint:"/sign-out",data:{userId:e}});case 4:t.sent&&(window.location.href="/");case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Z=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return K(function(e){return Object(p.a)({},e,{loading:!0})}),e.next=3,E({method:"GET",endpoint:"/request-access?userId=".concat(j._id)});case 3:if(a=e.sent,n=a.requestSent,!a.error){e.next=8;break}return window.location.href="/",e.abrupt("return",null);case 8:K(function(e){return Object(p.a)({},e,{loading:!1,requestSent:n})});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){b(),X()},[]),r.a.createElement("div",{className:"oauth"},r.a.createElement("div",{onClick:function(e){window.location.href="/"}},r.a.createElement(O,{dark:!0})),r.a.createElement("div",{className:"oauth-body"},c?r.a.createElement("div",{className:"loader",style:{marginTop:"100px"}},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"four"}),r.a.createElement("div",{className:"five"}),r.a.createElement("div",{className:"six"}))):r.a.createElement("div",{className:"google-auth-inner"},r.a.createElement("div",{style:{width:"100%",height:"30px"}}),r.a.createElement("div",{className:"profile-box"},r.a.createElement("div",{className:"profile-picture"},r.a.createElement("div",{className:"inner-picture"},r.a.createElement("img",{src:j.picture,alt:""}))),r.a.createElement("div",{className:"profile-details"},r.a.createElement("div",{className:"middle"},r.a.createElement("p",{className:"upper"},j.name),r.a.createElement("p",{className:"lower"},j.email)))),r.a.createElement("div",{style:{width:"100%",height:"20px"}}),r.a.createElement("div",{className:"message",style:{backgroundColor:"".concat(404===M.status?"red":"green")}},r.a.createElement("p",null,M.msg),M.period?"unlimited"===M.period?null:r.a.createElement("p",null,"You have access for ".concat(M.period)):null),r.a.createElement("div",{style:{width:"100%",height:"30px"}}),D?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"question"},"Would you want to change your user name?"),r.a.createElement("div",{style:{width:"100%",height:"10px"}}),r.a.createElement("form",{className:"form",onSubmit:z},r.a.createElement("div",{className:"username-input"},r.a.createElement("input",{type:"text",value:I,className:"input-box",onChange:function(e){P(e.target.value),e.target.value.includes("@")?R("Cannot have @ in username"):R("")}}),q?r.a.createElement(g,{err:q}):null),r.a.createElement("div",{style:{width:"100%",height:"30px"}}))):null,404!==M.status?r.a.createElement(G,{className:"oauth-button",onClick:z},f?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"CONTINUE"):null,Q.button?Q.requestSent?r.a.createElement("div",{className:"oauth-req-sent"},"REQUEST SENT"):r.a.createElement(G,{className:"oauth-signout-button",onClick:Z},Q.loading?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"REQUEST ACCESS"):null,r.a.createElement(G,{className:"oauth-signout-button",onClick:V},w?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"SIGN OUT"))))},U=(a(77),function(){return r.a.createElement("div",{className:"midpanel"},r.a.createElement(l.a,null,r.a.createElement(o.a,{exact:!0,path:"/",component:P}),r.a.createElement(o.a,{path:"/google-oauth-signin/:userId",component:A})))}),q=function(){return r.a.createElement(U,null)};s.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[36,1,2]]]);
//# sourceMappingURL=main.69522fd4.chunk.js.map