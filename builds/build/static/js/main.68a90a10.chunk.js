(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/latest-whiteblack.1827c48d.svg"},,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/latest-blackwhite.85de83fd.svg"},function(e,t,a){e.exports=a.p+"static/media/close.57ecc712.svg"},,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/success.388f5d07.svg"},function(e,t,a){e.exports=a.p+"static/media/failure.94447346.svg"},function(e,t,a){e.exports=a(78)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/latest-bluewhite.b3b544c8.svg"},function(e,t,a){e.exports=a.p+"static/media/linkedin-blue.a896527c.svg"},function(e,t,a){e.exports=a.p+"static/media/github-blue.9e082e29.svg"},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),i=a(12),o=a(4),l=a(2),u=a(1),m=a(3),d=a.n(m),p=a(5),f=a(15),v=a.n(f),h=(a(19),function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("http://localhost:5000"){e.next=5;break}return e.next=4,v()({method:"GET",url:"https://fervent-meninsky-931668.netlify.app/.netlify/functions/serverUrls"}).then(function(e){return e.data.server});case 4:e.sent;case 5:return{USER:localStorage.getItem("userId")||""},e.prev=6,e.next=9,v()({method:t.method,url:"api"===t.to?"/api".concat(t.endpoint):"/api/auth".concat(t.endpoint),data:t.data||{}});case 9:return a=e.sent,e.abrupt("return",a.data);case 13:return e.prev=13,e.t0=e.catch(6),console.log("ERROR----",e.t0.message),e.abrupt("return",{});case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),E=function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",url:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(d.a.mark(function e(){var t,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",url:"/api/auth/server-type"});case 2:if(t=e.sent,"MAIN"!==(a=t.data)){e.next=9;break}return e.next=7,Promise.all([E("https://songserver1.herokuapp.com"),E("https://songserver2.herokuapp.com"),E("https://songserver3.herokuapp.com")]);case 7:e.next=12;break;case 9:if("BACKUP"!==a){e.next=12;break}return e.next=12,Promise.all([E("https://songserver1-backup.herokuapp.com"),E("https://songserver2-backup.herokuapp.com"),E("https://songserver3-backup.herokuapp.com")]);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();var g=function(e){var t=e.err;return r.a.createElement("div",{className:"feedback",style:{color:"red"}},t)},N=(a(61),a(62),a(13)),w=a.n(N),x=a(18),k=a.n(x),O=(a(63),a(64),a(65),function(){return r.a.createElement("div",{className:"topbar"},r.a.createElement("div",{className:"innertopbar"},r.a.createElement("div",{className:"logopart"},r.a.createElement("img",{src:w.a,className:"logo",alt:""}),r.a.createElement("span",null,"Studio")),r.a.createElement("div",{className:"menupart"})))}),y=function(e){var t=e.dark;return r.a.createElement("div",{className:t?"login-top dark":"login-top"},r.a.createElement("img",{src:t?w.a:k.a,alt:""}),r.a.createElement("span",null,"Studio"))},j=(a(66),function(){return r.a.createElement("div",{className:"center"},r.a.createElement("p",null,"Music"),r.a.createElement("p",null,"for Everyone."),r.a.createElement("button",{onClick:function(e){window.location.href="/login/google"}},"CONTINUE WITH GOOGLE"))}),S=function(){return b(),r.a.createElement("div",{className:"main-container"},r.a.createElement(O,null),r.a.createElement("div",{className:"mainscreen-container"},r.a.createElement("div",{className:"mainscreen"},r.a.createElement("div",{className:"middle-container"},r.a.createElement(j,null)))))},C=(a(16),a(72),a(73),a(34),a(35),a(74),a(75),a(76),function(e){return r.a.createElement("button",{className:e.className,onClick:function(t){!function(e){var t=e.currentTarget,a=t.lastChild,n=Math.max(t.clientWidth,t.clientHeight),r=n/2,c=t.getBoundingClientRect();a.style.width=a.style.height="".concat(n,"px"),a.style.left="".concat(e.clientX-(c.left+r),"px"),a.style.top="".concat(e.clientY-(c.top+r),"px"),a.classList.remove("hidden"),a.classList.add("play"),setTimeout(function(){a.classList.remove("play"),a.classList.add("hidden")},600)}(t),e.onClick(t)},title:e.title,style:{outline:"none",position:"relative",overflow:"hidden"}},e.children,r.a.createElement("span",{className:"ripple hidden"}))}),T=function(){var e=Object(o.f)().userId,t=Object(n.useState)(!0),a=Object(u.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),m=Object(u.a)(i,2),f=m[0],v=m[1],E=Object(n.useState)(!1),N=Object(u.a)(E,2),w=N[0],x=N[1],k=Object(n.useState)({}),O=Object(u.a)(k,2),j=O[0],S=O[1],T=Object(n.useState)(""),I=Object(u.a)(T,2),q=I[0],U=I[1],G=Object(n.useState)(""),R=Object(u.a)(G,2),P=R[0],Y=R[1],L=Object(n.useState)({}),_=Object(u.a)(L,2),A=_[0],B=_[1],M=Object(n.useState)(!1),W=Object(u.a)(M,2),D=W[0],H=W[1],J=Object(n.useState)({button:!1,loading:!1,requestSent:!1}),Q=Object(u.a)(J,2),F=Q[0],K=Q[1],X=function(){var t=Object(p.a)(d.a.mark(function t(){var a,n,r,c,i,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({method:"POST",endpoint:"/oauth-check",data:{userId:e}});case 2:if(!(a=t.sent).error){t.next=5;break}return t.abrupt("return",window.location.href="/");case 5:if(n=a.status,r=a.type,c=a.set_username,i=a.only_button,o=a.request_button,200!==n){t.next=8;break}return t.abrupt("return",window.location.href="/");case 8:s(!1),S(a.user),c?(B({status:n,msg:"Your account has been granted access",period:a.period}),U(a.user.name),H(!0)):i?(B({status:n,msg:"",period:a.period}),H(!1)):"under_review"===r?B({status:n,msg:"Your account is awaiting approval"}):"expired"===r?B({status:n,msg:"Your account access has expired"}):"revoked"===r&&B({status:n,msg:"Your account access has been revoked"}),o&&K(function(e){return Object(l.a)({},e,{button:!0})});case 12:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(p.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!P){t.next=3;break}return t.abrupt("return");case 3:return v(!0),t.next=6,h({method:"POST",endpoint:"/continue-oauth-signin",data:{username:q,userId:e}});case 6:if(!(n=t.sent).error){t.next=9;break}return t.abrupt("return",window.location.href="/");case 9:if(!n.success){t.next=11;break}return t.abrupt("return",window.location.href="/");case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(p.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),x(!0),t.next=4,h({method:"POST",endpoint:"/sign-out",data:{userId:e}});case 4:t.sent,window.location.href="/";case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return K(function(e){return Object(l.a)({},e,{loading:!0})}),e.next=3,h({method:"GET",endpoint:"/request-access?userId=".concat(j._id)});case 3:if(a=e.sent,n=a.requestSent,!a.error){e.next=8;break}return window.location.href="/",e.abrupt("return",null);case 8:K(function(e){return Object(l.a)({},e,{loading:!1,requestSent:n})});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){b(),X()},[]),r.a.createElement("div",{className:"oauth"},r.a.createElement("div",{onClick:function(e){window.location.href="/"}},r.a.createElement(y,{dark:!0})),r.a.createElement("div",{className:"oauth-body"},c?r.a.createElement("div",{className:"loader",style:{marginTop:"100px"}},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"four"}),r.a.createElement("div",{className:"five"}),r.a.createElement("div",{className:"six"}))):r.a.createElement("div",{className:"google-auth-inner"},r.a.createElement("div",{style:{width:"100%",height:"30px"}}),r.a.createElement("div",{className:"profile-box"},r.a.createElement("div",{className:"profile-picture"},r.a.createElement("div",{className:"inner-picture"},r.a.createElement("img",{src:j.picture,alt:""}))),r.a.createElement("div",{className:"profile-details"},r.a.createElement("div",{className:"middle"},r.a.createElement("p",{className:"upper"},j.name),r.a.createElement("p",{className:"lower"},j.email)))),r.a.createElement("div",{style:{width:"100%",height:"20px"}}),r.a.createElement("div",{className:"message",style:{backgroundColor:"".concat(404===A.status?"red":"green")}},r.a.createElement("p",null,A.msg),A.period?"unlimited"===A.period?null:r.a.createElement("p",null,"You have access for ".concat(A.period)):null),r.a.createElement("div",{style:{width:"100%",height:"30px"}}),D?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"question"},"Would you want to change your user name?"),r.a.createElement("div",{style:{width:"100%",height:"10px"}}),r.a.createElement("form",{className:"form",onSubmit:z},r.a.createElement("div",{className:"username-input"},r.a.createElement("input",{type:"text",value:q,className:"input-box",onChange:function(e){U(e.target.value),e.target.value.includes("@")?Y("Cannot have @ in username"):Y("")}}),P?r.a.createElement(g,{err:P}):null),r.a.createElement("div",{style:{width:"100%",height:"30px"}}))):null,404!==A.status?r.a.createElement(C,{className:"oauth-button",onClick:z},f?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"CONTINUE"):null,F.button?F.requestSent?r.a.createElement("div",{className:"oauth-req-sent"},"REQUEST SENT"):r.a.createElement(C,{className:"oauth-signout-button",onClick:Z},F.loading?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"REQUEST ACCESS"):null,r.a.createElement(C,{className:"oauth-signout-button",onClick:V},w?r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loaderinner"},r.a.createElement("div",{className:"one"}),r.a.createElement("div",{className:"two"}),r.a.createElement("div",{className:"three"}))):"SIGN OUT"))))},I=(a(77),function(){return r.a.createElement("div",{className:"midpanel"},r.a.createElement(i.a,null,r.a.createElement(o.a,{exact:!0,path:"/",component:S}),r.a.createElement(o.a,{path:"/google-oauth-signin/:userId",component:T})))}),q=function(){return r.a.createElement(I,null)};s.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[36,1,2]]]);
//# sourceMappingURL=main.68a90a10.chunk.js.map